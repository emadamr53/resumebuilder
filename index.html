<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#667eea">
    <title>Resume Builder - Professional CV Creator</title>
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon-192.png">
    <link rel="stylesheet" href="styles.css">
    <!-- External libraries for PDF and Word export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode/1.5.3/qrcode.min.js"></script>
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="screen active">
        <div class="container">
            <div class="logo">
                <div class="logo-circle">CV</div>
            </div>
            <h1>Welcome Back!</h1>
            <p class="subtitle">Sign in to continue</p>
            
            <form id="loginForm" class="form">
                <div class="input-group">
                    <label>Email Address</label>
                    <input type="email" id="loginEmail" placeholder="Enter your email" required>
                </div>
                <div class="input-group">
                    <label>Password</label>
                    <input type="password" id="loginPassword" placeholder="Enter your password" required>
                </div>
                <button type="submit" class="btn btn-primary">Sign In</button>
            </form>
            
            <p class="link-text">
                Don't have an account? <a href="#" id="showSignup">Sign Up</a><br>
                <a href="#" id="showForgotPassword" style="margin-top: 10px; display: inline-block;">Forgot Password?</a>
            </p>
        </div>
    </div>

    <!-- Forgot Password Screen -->
    <div id="forgotPasswordScreen" class="screen">
        <div class="container">
            <div class="logo">
                <div class="logo-circle">CV</div>
            </div>
            <h1>Reset Password</h1>
            <p class="subtitle">Enter your email and new password</p>
            
            <form id="forgotPasswordForm" class="form">
                <div class="input-group">
                    <label>Email Address</label>
                    <input type="email" id="forgotEmail" placeholder="Enter your email" required>
                </div>
                <div class="input-group">
                    <label>New Password</label>
                    <input type="password" id="forgotNewPassword" placeholder="Enter new password" required minlength="6">
                </div>
                <div class="input-group">
                    <label>Confirm New Password</label>
                    <input type="password" id="forgotConfirmPassword" placeholder="Confirm new password" required minlength="6">
                </div>
                <button type="submit" class="btn btn-primary">Reset Password</button>
            </form>
            
            <p class="link-text">Remember your password? <a href="#" id="showLoginFromForgot">Sign In</a></p>
        </div>
    </div>

    <!-- Public User Resume Page -->
    <div id="publicResumeScreen" class="screen">
        <div class="header">
            <h2 id="publicUserName">Resume</h2>
            <button onclick="window.location.href='./'" class="btn-icon">ğŸ  Home</button>
        </div>
        <div class="container">
            <div id="publicResumeContent" class="resume-preview">
                <p class="empty-state">Loading resume...</p>
            </div>
        </div>
    </div>

    <!-- Sign Up Screen -->
    <div id="signupScreen" class="screen">
        <div class="container">
            <div class="logo">
                <div class="logo-circle">CV</div>
            </div>
            <h1>Create Account</h1>
            <p class="subtitle">Start building your resume</p>
            
            <form id="signupForm" class="form">
                <div class="input-group">
                    <label>Full Name</label>
                    <input type="text" id="signupName" placeholder="Enter your full name" required>
                </div>
                <div class="input-group">
                    <label>Username</label>
                    <input type="text" id="signupUsername" placeholder="Choose a username" required>
                </div>
                <div class="input-group">
                    <label>Email Address</label>
                    <input type="email" id="signupEmail" placeholder="Enter your email" required>
                </div>
                <div class="input-group">
                    <label>Password</label>
                    <input type="password" id="signupPassword" placeholder="Create a password" required>
                </div>
                <button type="submit" class="btn btn-primary">Sign Up</button>
            </form>
            
            <p class="link-text">Already have an account? <a href="#" id="showLogin">Sign In</a></p>
        </div>
    </div>

    <!-- Dashboard Screen -->
    <div id="dashboardScreen" class="screen">
        <div class="header">
            <h2>Resume Builder</h2>
            <div class="header-actions">
                <button id="themeToggle" class="btn-icon" title="Toggle Dark/Light Mode">ğŸŒ™</button>
                <button id="logoutBtn" class="btn-icon" title="Logout">ğŸšª</button>
            </div>
        </div>
        
        <div class="container">
            <h1 id="welcomeText">Welcome!</h1>
            <p class="subtitle">What would you like to do?</p>
            
            <div class="cards-grid">
                <div class="card" onclick="showScreen('resumeFormScreen')">
                    <div class="card-icon">ğŸ“</div>
                    <h3>Create Resume</h3>
                    <p>Start building a new professional resume</p>
                </div>
                
                <div class="card" onclick="showScreen('previewScreen')">
                    <div class="card-icon">ğŸ‘ï¸</div>
                    <h3>Preview CV</h3>
                    <p>See how your resume looks</p>
                </div>
                
                <div class="card" onclick="showScreen('themeSelectionScreen')">
                    <div class="card-icon">ğŸ¨</div>
                    <h3>Choose Theme</h3>
                    <p>Select CV template style</p>
                </div>
                
                <div class="card" onclick="showScreen('jobFinderScreen')">
                    <div class="card-icon">ğŸ¤–</div>
                    <h3>AI Job Finder</h3>
                    <p>Get job suggestions based on skills</p>
                </div>
                
                <div class="card" onclick="showScreen('exportScreen')">
                    <div class="card-icon">ğŸ’¾</div>
                    <h3>Export Resume</h3>
                    <p>Download as PDF or Word</p>
                </div>
                
                <div class="card" onclick="showScreen('fileManagerScreen')">
                    <div class="card-icon">ğŸ“</div>
                    <h3>File Manager</h3>
                    <p>Save & load resumes from files</p>
                </div>
                
                <div class="card" onclick="showScreen('qrCodeScreen')">
                    <div class="card-icon">ğŸ“±</div>
                    <h3>QR Code</h3>
                    <p>Generate QR code for your resume</p>
                </div>
                
                <div class="card" onclick="showPublicResumePage()">
                    <div class="card-icon">ğŸŒ</div>
                    <h3>My Public Page</h3>
                    <p>View and share your public resume</p>
                </div>
            </div>
            
            <div style="margin-top: 30px; text-align: center;">
                <button onclick="sharePublicResume()" class="btn btn-secondary" style="max-width: 300px; margin: 0 auto;">
                    ğŸ”— Share My Resume
                </button>
            </div>
        </div>
    </div>

    <!-- Resume Form Screen -->
    <div id="resumeFormScreen" class="screen">
        <div class="header">
            <button onclick="showScreen('dashboardScreen')" class="btn-back">â† Back</button>
            <h2>Create Resume</h2>
            <div id="autoSaveStatus" class="auto-save-status"></div>
        </div>
        
        <div class="container form-container">
            <form id="resumeForm">
                <section class="form-section">
                    <h3>Personal Information</h3>
                    <div class="input-group">
                        <label>Full Name</label>
                        <input type="text" id="resumeName" required>
                    </div>
                    <div class="input-group">
                        <label>Email</label>
                        <input type="email" id="resumeEmail" required>
                    </div>
                    <div class="input-group">
                        <label>Phone</label>
                        <input type="tel" id="resumePhone" required>
                    </div>
                    <div class="input-group">
                        <label>Address</label>
                        <input type="text" id="resumeAddress">
                    </div>
                </section>

                <section class="form-section">
                    <h3>Skills</h3>
                    <div class="input-group">
                        <label>Your Skills (comma separated)</label>
                        <textarea id="resumeSkills" placeholder="e.g., Java, Python, React, Machine Learning"></textarea>
                    </div>
                </section>

                <section class="form-section">
                    <h3>Experience</h3>
                    <div id="experienceContainer"></div>
                    <button type="button" class="btn btn-secondary" onclick="addExperience()">+ Add Experience</button>
                </section>

                <section class="form-section">
                    <h3>Education</h3>
                    <div id="educationContainer"></div>
                    <button type="button" class="btn btn-secondary" onclick="addEducation()">+ Add Education</button>
                </section>

                <button type="submit" class="btn btn-primary btn-large">ğŸ’¾ Save Resume</button>
                <div style="margin-top: 15px; text-align: center; display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
                    <button type="button" onclick="testSave()" class="btn btn-secondary" style="max-width: 200px;">
                        ğŸ” Test Save
                    </button>
                    <button type="button" onclick="viewDataStorage()" class="btn btn-secondary" style="max-width: 200px;">
                        ğŸ“¦ View Storage
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Preview Screen -->
    <div id="previewScreen" class="screen">
        <div class="header">
            <button onclick="showScreen('dashboardScreen')" class="btn-back">â† Back</button>
            <h2>Resume Preview</h2>
            <button onclick="exportResume()" class="btn-icon">ğŸ’¾</button>
        </div>
        
        <div class="container">
            <div id="resumePreview" class="resume-preview">
                <p class="empty-state">No resume data available. Create a resume first!</p>
            </div>
        </div>
    </div>

    <!-- Theme Selection Screen -->
    <div id="themeSelectionScreen" class="screen">
        <div class="header">
            <button onclick="showScreen('dashboardScreen')" class="btn-back">â† Back</button>
            <h2>Choose CV Theme</h2>
            <div></div>
        </div>
        
        <div class="container">
            <p class="subtitle">Select a theme for your resume</p>
            <div class="themes-grid">
                <div class="theme-card" data-theme="classic" onclick="selectTheme('classic')">
                    <div class="theme-preview classic-preview"></div>
                    <h3>Classic</h3>
                    <p>Traditional and timeless design</p>
                </div>
                <div class="theme-card" data-theme="modern" onclick="selectTheme('modern')">
                    <div class="theme-preview modern-preview"></div>
                    <h3>Modern</h3>
                    <p>Clean and contemporary style</p>
                </div>
                <div class="theme-card" data-theme="professional" onclick="selectTheme('professional')">
                    <div class="theme-preview professional-preview"></div>
                    <h3>Professional</h3>
                    <p>Corporate and formal layout</p>
                </div>
                <div class="theme-card" data-theme="creative" onclick="selectTheme('creative')">
                    <div class="theme-preview creative-preview"></div>
                    <h3>Creative</h3>
                    <p>Bold and artistic presentation</p>
                </div>
            </div>
            <button onclick="applyTheme()" class="btn btn-primary btn-large" style="margin-top: 20px;">Apply Theme & Preview</button>
        </div>
    </div>

    <!-- Job Finder Screen -->
    <div id="jobFinderScreen" class="screen">
        <div class="header">
            <button onclick="showScreen('dashboardScreen')" class="btn-back">â† Back</button>
            <h2>AI Job Finder</h2>
            <div></div>
        </div>
        
        <div class="container">
            <div class="search-section">
                <div class="input-group">
                    <label>Your Skills</label>
                    <input type="text" id="jobSkills" placeholder="e.g., Java, Python, React">
                </div>
                <div class="input-group">
                    <label>Location</label>
                    <input type="text" id="jobLocation" placeholder="e.g., New York, Remote">
                </div>
                <button onclick="searchJobs()" class="btn btn-primary btn-large">ğŸ” Find Jobs</button>
            </div>
            
            <div id="jobResults" class="job-results"></div>
        </div>
    </div>

    <!-- Export Screen -->
    <div id="exportScreen" class="screen">
        <div class="header">
            <button onclick="showScreen('dashboardScreen')" class="btn-back">â† Back</button>
            <h2>Export Resume</h2>
            <div></div>
        </div>
        
        <div class="container">
            <div class="export-options">
                <button onclick="exportAsPDF()" class="btn btn-primary btn-large">ğŸ“„ Export as PDF</button>
                <button onclick="exportAsWord()" class="btn btn-primary btn-large">ğŸ“ Export as Word</button>
            </div>
        </div>
    </div>

    <!-- QR Code Screen -->
    <div id="qrCodeScreen" class="screen">
        <div class="header">
            <button onclick="showScreen('dashboardScreen')" class="btn-back">â† Back</button>
            <h2>QR Code Generator</h2>
            <div></div>
        </div>
        
        <div class="container">
            <div class="qr-section">
                <p class="subtitle">Scan this QR code to open your resume on any device</p>
                <div id="qrCodeContainer" class="qr-container">
                    <canvas id="qrCanvas"></canvas>
                </div>
                <p class="qr-url" id="qrUrl"></p>
                <button onclick="downloadQRCode()" class="btn btn-primary btn-large">ğŸ“¥ Download QR Code</button>
            </div>
        </div>
    </div>

    <!-- File Manager Screen -->
    <div id="fileManagerScreen" class="screen">
        <div class="header">
            <button onclick="showScreen('dashboardScreen')" class="btn-back">â† Back</button>
            <h2>File Manager</h2>
            <div></div>
        </div>
        
        <div class="container">
            <div class="file-manager-section">
                <h3>ğŸ’¾ Save Resume to MacBook</h3>
                <p class="subtitle">Save your resume as a file on your MacBook in the "saved_resumes" folder</p>
                
                <div class="file-actions">
                    <button onclick="saveResumeToDownloads()" class="btn btn-primary btn-large">
                        ğŸ’¾ Save Resume to MacBook NOW
                    </button>
                    <div style="margin-top: 15px; padding: 15px; background: var(--bg-card); border-radius: 10px; border-left: 4px solid var(--success);">
                        <p style="margin: 0; font-size: 13px; line-height: 1.6;">
                            âœ… <strong>GOOD NEWS!</strong> Your resume is automatically saved to your MacBook every time you click "Save Resume"!<br>
                            ğŸ“ <strong>Format:</strong> Plain Text (.txt) - Opens in ANY app!<br>
                            ğŸ“ <strong>Location:</strong> <code>~/Downloads/RESUME_*.txt</code><br>
                            ğŸ’¡ <strong>Opens in:</strong> TextEdit, Notes, or any text editor - NO special app needed!
                        </p>
                    </div>
                </div>
                
                <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid var(--border);">
                    <h3>ğŸ“‚ Load Resume from File</h3>
                    <p class="subtitle">Load a previously saved resume file</p>
                    
                    <div class="file-actions">
                        <button onclick="loadResumeFromFile()" class="btn btn-primary btn-large">
                            ğŸ“‚ Load Resume from File
                        </button>
                    </div>
                </div>
                
                <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid var(--border);">
                    <h3>ğŸ“‹ Find Your Saved Files</h3>
                    <p class="subtitle">Your resumes are saved to:</p>
                    <div class="file-location">
                        <code id="fileLocation">~/Downloads/</code>
                        <button onclick="copyFileLocation()" class="btn btn-secondary" style="padding: 5px 15px;">
                            ğŸ“‹ Copy Path
                        </button>
                    </div>
                    
                    <div style="margin-top: 15px; display: flex; gap: 10px; flex-wrap: wrap;">
                        <button onclick="showSavedFilesLocation()" class="btn btn-primary" style="flex: 1; min-width: 200px;">
                            ğŸ“‚ Show File Location
                        </button>
                        <button onclick="openDownloadsFolder()" class="btn btn-secondary" style="flex: 1; min-width: 200px;">
                            ğŸ—‚ï¸ How to Open Downloads
                        </button>
                        <button onclick="listAllSavedFiles()" class="btn btn-secondary" style="flex: 1; min-width: 200px;">
                            ğŸ“‹ List All Saved Files
                        </button>
                    </div>
                    
                    <div style="margin-top: 20px; padding: 15px; background: var(--bg-card); border-radius: 10px; border-left: 4px solid var(--accent-primary);">
                        <h4 style="margin-bottom: 10px; color: var(--accent-primary);">ğŸ’¡ Quick Guide to Find Files:</h4>
                        <ol style="margin-left: 20px; line-height: 1.8; font-size: 13px;">
                            <li><strong>Press âŒ˜ + Shift + D</strong> in Finder (opens Downloads)</li>
                            <li>Or open Finder â†’ Click <strong>"Downloads"</strong> in sidebar</li>
                            <li>Or press <strong>âŒ˜ + Shift + G</strong> â†’ Type: <code>~/Downloads</code></li>
                            <li>Look for files named: <code>resume_name_2024-11-30.json</code></li>
                        </ol>
                        <button onclick="helpFindFiles()" class="btn btn-primary" style="margin-top: 15px; width: 100%;">
                            ğŸ†˜ I Can't Find My Files - Help Me!
                        </button>
                        <button onclick="testFileDownload()" class="btn btn-secondary" style="margin-top: 10px; width: 100%;">
                            ğŸ§ª Test File Download (Let's See Where It Goes!)
                        </button>
                    </div>
                    
                    <div style="margin-top: 15px; padding: 15px; background: var(--bg-card); border-radius: 10px;">
                        <h4 style="margin-bottom: 10px;">ğŸ“ Organize Your Files:</h4>
                        <p style="font-size: 13px; line-height: 1.6;">
                            Create a <strong>"saved_resumes"</strong> folder in Downloads to keep all your resumes organized:<br>
                            <code style="display: block; margin-top: 8px; padding: 8px; background: var(--bg-secondary); border-radius: 5px;">
                                ~/Downloads/saved_resumes/
                            </code>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Hidden file input for loading files -->
    <input type="file" id="fileInput" accept=".txt,.json" style="display: none;" onchange="handleFileLoad(event)">

    <script src="app.js"></script>
</body>
</html>
